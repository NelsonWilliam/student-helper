<!DOCTYPE html>
<html>
    <head>
        <title>Google sign in</title>
        <script src="https://apis.google.com/js/platform.js" async defer></script>
        <meta name="google-signin-client_id" content="426236434887-nfi9uqfb7ffnrj23j12hub7t4gf1n9jr.apps.googleusercontent.com">
    </head>
    <body>
        <script>
            function onSignIn(googleUser) {
                var profile = googleUser.getBasicProfile();
                alert("Voce se conectou");
                document.getElementById("profile").style.display = "block";
        		document.getElementById("login").style.display = "none";
                document.getElementById("pic").src=profile.getImageUrl();
                document.getElementById("name").textContent=profile.getName();
                document.getElementById("email").textContent=profile.getEmail();             
                
                console.log("user signed in");
                console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token below instead.
                //var id_token = googleUser.getAuthResponse().id_token;
                //console.log("ID Token: " + id_token);
            }
            
            function signOut() {
                var auth2 = gapi.auth2.getAuthInstance();
                auth2.signOut().then(function () {
                    alert("Voce se desconectou");
                    console.log('User signed out.');
                    document.getElementById("profile").style.display = "none";
                    document.getElementById("login").style.display = "block";
                });
            }
        </script>
        
        <div id="login" style="display:block;">
            <h1>Login</h1>
            <div class="g-signin2" data-onsuccess="onSignIn"></div>
        </div>
        
        <div id="profile" style="display:none;">
            <h1>Your Profile</h1>
            <img id="pic" width="100" height="100"/>
            <p><b>Name: </b></p>
            <p id="name"></p>
            <p><b>Email: </b></p>
            <p id="email"></p>
            <br><button onclick="signOut()">Sign out</button>
            <p><i>obs.: localhost is not allowed to sign out successfully</i></p>
        </div>

    </body>
</html>

